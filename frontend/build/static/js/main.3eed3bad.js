(()=>{"use strict";var e,a,t,r={798:(e,a,t)=>{var r=t(43),s=t(391),d=t(216),n=t(475),i=t(379),o=t(420),l=t(978),c=t(579);const m=(0,r.createContext)();function u(e){let{children:a}=e;const[t,s]=(0,r.useState)(null),[d,n]=(0,r.useState)(!0),u=e=>{null!=e&&e.preferredLanguage?(l.Ay.changeLanguage(e.preferredLanguage),localStorage.setItem("language",e.preferredLanguage),document.documentElement.lang=e.preferredLanguage):(l.Ay.changeLanguage("en"),localStorage.setItem("language","en"),document.documentElement.lang="en")};(0,r.useEffect)((()=>{(()=>{try{const e=localStorage.getItem("token");if(e){const a=(0,o.s)(e);1e3*a.exp>Date.now()?(s(a),u(a)):(localStorage.removeItem("token"),s(null))}}catch(e){localStorage.removeItem("token"),s(null)}finally{n(!1)}})()}),[]);return d?(0,c.jsx)("div",{children:"Loading..."}):(0,c.jsx)(m.Provider,{value:{user:t,login:e=>{try{localStorage.setItem("token",e);const a=(0,o.s)(e);s(a),u(a)}catch(e){localStorage.removeItem("token"),s(null)}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("language"),s(null)},updateUser:e=>{if(t&&e){const a=(0,i.A)((0,i.A)({},t),e);s(a),u(a)}}},children:a})}function g(){return(0,r.useContext)(m)}const p=t(213).A.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});p.interceptors.request.use((e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e}),(e=>Promise.reject(e))),p.interceptors.response.use((e=>e),(e=>{var a;return 401===(null===(a=e.response)||void 0===a?void 0:a.status)&&(localStorage.removeItem("token"),window.location.href="/dftasks/login"),Promise.reject(e)}));const x=p;var h=t(242),y=t(360);const f={en:"GB",pl:"PL",sv:"SE",uk:"UA"},k=()=>{const{i18n:e,t:a}=(0,h.Bd)();return(0,c.jsx)("div",{className:"flex items-center space-x-1 sm:space-x-2",children:Object.entries(f).map((t=>{let[r,s]=t;return(0,c.jsx)("button",{onClick:()=>(a=>{e.changeLanguage(a);try{localStorage.setItem("language",JSON.stringify(a))}catch(e){}})(r),className:"transition-transform duration-150 ".concat(e.language===r?"transform scale-110 sm:scale-125":"hover:scale-110"),"aria-label":a("".concat(r)),title:a("".concat(r)),children:(0,c.jsx)(y.A,{countryCode:s,svg:!0,style:{width:"1.5em",height:"1.5em","@media (minWidth: 640px)":{width:"2em",height:"2em"}},title:a("".concat(r))})},r)}))})};const v=function(){const[e,a]=(0,r.useState)(""),[t,s]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),m=(0,d.Zp)(),{t:u}=(0,h.Bd)(),{login:p,user:y}=g();return(0,r.useEffect)((()=>{y&&m("/dftasks/month-view",{replace:!0})}),[y,m]),y?null:(0,c.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-df-light dark:bg-dark px-4 sm:px-6 lg:px-8",children:[(0,c.jsx)("div",{className:"absolute top-4 right-4",children:(0,c.jsx)(k,{})}),(0,c.jsxs)("div",{className:"w-full max-w-md space-y-6 -mt-20",children:[(0,c.jsxs)("div",{className:"flex flex-col items-center",children:[(0,c.jsx)("img",{src:"/dftasks/dark_logo.png",alt:"DFTasks Logo",className:"hidden dark:block w-auto h-40 sm:h-52 mb-2"}),(0,c.jsx)("img",{src:"/dftasks/light_logo.png",alt:"DFTasks Logo",className:"dark:hidden w-auto h-40 sm:h-52 mb-2"}),(0,c.jsx)("p",{className:"text-center text-sm sm:text-base text-df-primary/70 dark:text-gray-400",children:u("propertyManagement")})]}),(0,c.jsxs)("form",{className:"mt-8 space-y-6 bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 sm:p-8",onSubmit:async a=>{a.preventDefault(),l(!0),i("");try{const a=await x.post("/auth/login",{email:e,password:t});a.data&&a.data.token?(p(a.data.token),m("/dftasks/month-view",{replace:!0})):i(u("loginError"))}catch(e){var r,s;i((null===(r=e.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||u("loginError"))}finally{l(!1)}},children:[(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-df-primary dark:text-white mb-1",children:u("email")}),(0,c.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-df-primary dark:text-white bg-white dark:bg-gray-700 rounded-md focus:outline-none focus:ring-df-primary focus:border-df-primary sm:text-sm",placeholder:u("enterEmail"),value:e,onChange:e=>a(e.target.value),disabled:o})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-df-primary dark:text-white mb-1",children:u("password")}),(0,c.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-df-primary dark:text-white bg-white dark:bg-gray-700 rounded-md focus:outline-none focus:ring-df-primary focus:border-df-primary sm:text-sm",placeholder:u("enterPassword"),value:t,onChange:e=>s(e.target.value),disabled:o})]})]}),n&&(0,c.jsx)("div",{className:"rounded-md bg-red-50 dark:bg-red-900/50 p-4",children:(0,c.jsx)("div",{className:"flex",children:(0,c.jsx)("div",{className:"ml-3",children:(0,c.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:n})})})}),(0,c.jsx)("div",{children:(0,c.jsx)("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm sm:text-base font-medium rounded-md text-white bg-df-primary hover:bg-df-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-df-primary transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,children:u(o?"loggingIn":"login")})})]})]})]})};var b=t(917);const w=()=>{const{t:e,i18n:a}=(0,h.Bd)(),t=(0,r.useMemo)((()=>async t=>{if(!t)return null;let r=t.title,s=t.description;t.translations&&t.translations[a.language]&&(r=t.translations[a.language].title||t.title,s=t.translations[a.language].description||t.description);const d=(t.comments||[]).map((t=>{let r=t.content;return t.translations&&t.translations[a.language]&&(r=t.translations[a.language]),(0,i.A)((0,i.A)({},t),{},{content:r,createdBy:t.createdBy||{name:e("unassigned")}})}));return(0,i.A)((0,i.A)({},t),{},{title:r,description:s,comments:d,_translatedLang:a.language})}),[a.language,e]),s=(0,r.useMemo)((()=>async e=>Array.isArray(e)?Promise.all(e.map(t)):[]),[t]),d=(0,r.useMemo)((()=>async t=>Array.isArray(t)?t.map((t=>{var r,s;return(0,i.A)((0,i.A)({},t),{},{content:(null===(r=t.translations)||void 0===r?void 0:r[a.language])||t.content,createdBy:t.createdBy||{name:e("unassigned")},_translated:!0,_translatedLang:null!==(s=t.translations)&&void 0!==s&&s[a.language]?a.language:"en"})})):[]),[a.language,e]);return{translateTask:t,translateTasks:s,translateComments:d,currentLanguage:a.language}};var j=t(339),N=t(369);const S=function(e){var a,t;let{task:s,onClose:d,onStatusUpdate:n,onAddComment:o,onArchive:l,onToggleCommentStatus:m,userRole:u,userId:g,getStatusClass:p,renderStatus:x,users:y,onEdit:f}=e;const[k,v]=(0,r.useState)(""),[S,A]=(0,r.useState)(!1),{t:T}=(0,h.Bd)(),{translateTask:C}=w(),[P,D]=(0,r.useState)(s),[z,U]=(0,r.useState)(!1),[I,M]=(0,r.useState)(null),E="ADMIN"===u||"SUPERADMIN"===u;(0,r.useEffect)((()=>{(async()=>{const e=await C(s);D(e)})()}),[s,C]),(0,r.useEffect)((()=>{s&&M((0,i.A)((0,i.A)({},s),{},{dueDate:s.dueDate?(0,b.A)(new Date(s.dueDate),"yyyy-MM-dd"):""}))}),[s]);const _=e=>{const{name:a,value:t}=e.target;M((e=>(0,i.A)((0,i.A)({},e),{},{[a]:t})))};return(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,c.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-df-primary dark:text-white",children:z?T("editTask"):P.title}),(0,c.jsx)("button",{onClick:d,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,c.jsx)(N.QCr,{})})]}),z?(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:T("title")}),(0,c.jsx)("input",{type:"text",name:"title",value:(null==I?void 0:I.title)||"",onChange:_,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:T("description")}),(0,c.jsx)("textarea",{name:"description",value:(null==I?void 0:I.description)||"",onChange:_,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:"3"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:T("dueDate")}),(0,c.jsx)("input",{type:"date",name:"dueDate",value:(null==I?void 0:I.dueDate)||"",onChange:_,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:T("assignedTo")}),(0,c.jsxs)("select",{name:"assignedTo",value:(null==I||null===(a=I.assignedTo)||void 0===a?void 0:a._id)||"",onChange:_,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,c.jsx)("option",{value:"",children:T("selectUser")}),y.map((e=>(0,c.jsx)("option",{value:e._id,children:e.name},e._id)))]})]}),(0,c.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,c.jsx)("button",{onClick:()=>U(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",children:T("cancel")}),(0,c.jsx)("button",{onClick:async()=>{I&&(await f(I),U(!1))},className:"px-4 py-2 text-sm font-medium text-white bg-df-primary rounded-md hover:bg-df-primary/90",children:T("save")})]})]}):(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:T("title")}),(0,c.jsx)("p",{className:"text-gray-900 dark:text-white",children:P.title})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:T("description")}),(0,c.jsx)("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap",children:P.description})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:T("dueDate")}),(0,c.jsx)("p",{className:"text-gray-900 dark:text-white",children:P.dueDate?(0,b.A)(new Date(P.dueDate),"yyyy-MM-dd"):T("noDate")})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:T("assignedTo")}),(0,c.jsx)("p",{className:"text-gray-900 dark:text-white",children:(null===(t=P.assignedTo)||void 0===t?void 0:t.name)||T("unassigned")})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:T("status")}),(0,c.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(p(P.status)),children:x(P.status)})]}),E&&(0,c.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,c.jsx)("button",{onClick:()=>U(!0),className:"px-4 py-2 text-sm font-medium text-white bg-df-primary rounded-md hover:bg-df-primary/90",children:T("edit")}),(0,c.jsx)("button",{onClick:async()=>{try{await l(s)}catch(e){j.oR.error(T("errorTogglingTaskStatus"))}},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",children:P.isActive?T("archive"):T("unarchive")})]})]}),(0,c.jsxs)("div",{className:"mt-6",children:[(0,c.jsx)("h3",{className:"text-lg font-medium text-df-primary dark:text-white mb-4",children:T("comments")}),(0,c.jsx)("div",{className:"space-y-4",children:P.comments&&P.comments.length>0?P.comments.map((e=>{var a;return(0,c.jsxs)("div",{className:"p-4 rounded-lg ".concat(e.isActive?"bg-gray-50 dark:bg-gray-700":"bg-red-50 dark:bg-red-900/20"),children:[(0,c.jsxs)("div",{className:"flex justify-between items-start",children:[(0,c.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,c.jsx)("span",{className:"font-medium text-df-primary dark:text-white",children:(null===(a=e.createdBy)||void 0===a?void 0:a.name)||T("unassigned")}),(0,c.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:(0,b.A)(new Date(e.createdAt),"yyyy-MM-dd HH:mm")})]}),E&&(0,c.jsx)("button",{onClick:()=>m(P._id,e._id),className:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.isActive?T("archive"):T("unarchive")})]}),(0,c.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300 whitespace-pre-wrap",children:e.content})]},e._id)})):(0,c.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:T("noComments")})}),(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsx)("textarea",{value:k,onChange:e=>v(e.target.value),placeholder:T("writeComment"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-df-primary focus:border-df-primary dark:bg-gray-700 dark:text-white",rows:3}),(0,c.jsx)("div",{className:"mt-2 flex justify-end",children:(0,c.jsx)("button",{onClick:()=>{k.trim()&&(A(!0),o(s._id,k).then((()=>{v("")})).catch((e=>{})).finally((()=>{A(!1)})))},disabled:S||!k.trim(),className:"px-4 py-2 bg-df-primary text-white rounded-md hover:bg-df-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-df-primary disabled:opacity-50 disabled:cursor-not-allowed",children:T(S?"sending":"send")})})]})]})]})})})},A=e=>{let{onSubmit:a,onCancel:t,initialData:s={},users:d=[]}=e;const{t:n}=(0,h.Bd)(),[o,l]=(0,r.useState)({title:"",description:"",status:"pending",assignedTo:"",dueDate:(0,b.A)(new Date,"yyyy-MM-dd")}),[m,u]=(0,r.useState)(""),[g,p]=(0,r.useState)(!1);(0,r.useEffect)((()=>{var e;s&&Object.keys(s).length>0&&l({title:s.title||"",description:s.description||"",status:s.status||"pending",assignedTo:(null===(e=s.assignedTo)||void 0===e?void 0:e._id)||"",dueDate:s.dueDate?(0,b.A)(new Date(s.dueDate),"yyyy-MM-dd"):(0,b.A)(new Date,"yyyy-MM-dd")})}),[s]);const x=e=>{const{name:a,value:t}=e.target;l((e=>(0,i.A)((0,i.A)({},e),{},{[a]:t})))};return(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!g)try{p(!0),u(""),await a(o)}catch(e){u(n("errorSavingTask"))}finally{p(!1)}},className:"space-y-4",children:[m&&(0,c.jsx)("div",{className:"bg-red-100 dark:bg-red-900/50 border border-red-400 text-red-700 dark:text-red-200 px-4 py-3 rounded relative",children:(0,c.jsx)("span",{className:"block sm:inline",children:m})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:n("title")}),(0,c.jsx)("input",{type:"text",name:"title",value:o.title,onChange:x,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-df-primary focus:ring-df-primary dark:bg-gray-700 dark:text-white",required:!0,disabled:g})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:n("description")}),(0,c.jsx)("textarea",{name:"description",value:o.description,onChange:x,rows:3,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-df-primary focus:ring-df-primary dark:bg-gray-700 dark:text-white",required:!0,disabled:g})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:n("status")}),(0,c.jsxs)("select",{name:"status",value:o.status,onChange:x,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-df-primary focus:ring-df-primary dark:bg-gray-700 dark:text-white",required:!0,disabled:g,children:[(0,c.jsx)("option",{value:"pending",children:n("pending")}),(0,c.jsx)("option",{value:"in progress",children:n("inProgress")}),(0,c.jsx)("option",{value:"completed",children:n("completed")}),(0,c.jsx)("option",{value:"cannot fix",children:n("cannotFix")})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:n("assignedTo")}),(0,c.jsxs)("select",{name:"assignedTo",value:o.assignedTo,onChange:x,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-df-primary focus:ring-df-primary dark:bg-gray-700 dark:text-white",required:!0,disabled:g,children:[(0,c.jsx)("option",{value:"",children:n("selectUser")}),d.map((e=>(0,c.jsx)("option",{value:e._id,children:e.name},e._id)))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:n("dueDate")}),(0,c.jsx)("input",{type:"date",name:"dueDate",value:o.dueDate,onChange:x,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-df-primary focus:ring-df-primary dark:bg-gray-700 dark:text-white",required:!0,disabled:g})]}),(0,c.jsxs)("div",{className:"flex space-x-4",children:[(0,c.jsx)("button",{type:"submit",className:"flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-df-primary hover:bg-df-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-df-primary disabled:opacity-50 disabled:cursor-not-allowed",disabled:g,children:n(g?"saving":"submit")}),(0,c.jsx)("button",{type:"button",onClick:t,className:"flex-1 py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-df-primary",children:n("cancel")})]})]})};const T=function(e){let{user:a,onClose:t,onEdit:s,isCreating:d}=e;const[n,i]=(0,r.useState)((null==a?void 0:a.name)||""),[o,l]=(0,r.useState)((null==a?void 0:a.email)||""),[m,u]=(0,r.useState)(""),[p,y]=(0,r.useState)(""),[f,k]=(0,r.useState)(""),[v,b]=(0,r.useState)((null==a?void 0:a.preferredLanguage)||"en"),[w,j]=(0,r.useState)(""),[N,S]=(0,r.useState)(""),{t:A,i18n:T}=(0,h.Bd)(),{user:C,updateUser:P}=g();return(0,c.jsxs)("div",{className:"fixed inset-0 z-[55] overflow-y-auto",children:[(0,c.jsx)("div",{className:"fixed inset-0 bg-black/30",onClick:t}),(0,c.jsx)("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:(0,c.jsx)("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold text-df-primary dark:text-white",children:A("userSettings")}),(0,c.jsxs)("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:[(0,c.jsx)("span",{className:"sr-only",children:A("close")}),(0,c.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),w&&(0,c.jsx)("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:w}),N&&(0,c.jsx)("div",{className:"mb-4 p-2 bg-green-100 text-green-700 rounded",children:N}),(0,c.jsx)("form",{onSubmit:async e=>{e.preventDefault(),j(""),S("");try{const e={name:n,email:o,preferredLanguage:v};let d;var r;if((null==a?void 0:a._id)===(null==C?void 0:C.id))d=await x.patch("/profile",e),null!==(r=d.data)&&void 0!==r&&r.user&&(T.changeLanguage(v),localStorage.setItem("language",v),P(d.data.user));else await s(e);S(A("profileUpdated")),"function"==typeof t&&setTimeout((()=>t()),1500)}catch(e){var d,i,l;400===(null===(d=e.response)||void 0===d?void 0:d.status)?j(e.response.data.message||A("invalidData")):401===(null===(i=e.response)||void 0===i?void 0:i.status)?j(A("unauthorized")):409===(null===(l=e.response)||void 0===l?void 0:l.status)?j(A("emailAlreadyExists")):j(A("error"))}},className:"mb-6",children:(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-df-primary dark:text-white",children:A("name")}),(0,c.jsx)("input",{type:"text",id:"name",value:n,onChange:e=>i(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-df-primary focus:ring-df-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-df-primary dark:text-white",children:A("email")}),(0,c.jsx)("input",{type:"email",id:"email",value:o,onChange:e=>l(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-df-primary focus:ring-df-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"preferredLanguage",className:"block text-sm font-medium text-df-primary dark:text-white",children:A("preferredLanguage")}),(0,c.jsxs)("select",{id:"preferredLanguage",value:v,onChange:e=>{const a=e.target.value;b(a)},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-df-primary focus:ring-df-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm",children:[(0,c.jsx)("option",{value:"sv",children:"Svenska"}),(0,c.jsx)("option",{value:"pl",children:"Polski"}),(0,c.jsx)("option",{value:"uk",children:"Українська"}),(0,c.jsx)("option",{value:"en",children:"English"})]})]}),(0,c.jsx)("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-df-primary hover:bg-df-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-df-primary",children:A("updateProfile")})]})}),(0,c.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),j(""),S(""),p===f)try{await x.patch("/users/password",{currentPassword:m,newPassword:p}),S(A("passwordUpdated")),u(""),y(""),k("")}catch(e){var a,t;j((null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||A("error"))}else j(A("passwordsDoNotMatch"))},children:(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-df-primary dark:text-white",children:A("currentPassword")}),(0,c.jsx)("input",{type:"password",id:"currentPassword",value:m,onChange:e=>u(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-df-primary focus:ring-df-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-df-primary dark:text-white",children:A("newPassword")}),(0,c.jsx)("input",{type:"password",id:"newPassword",value:p,onChange:e=>y(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-df-primary focus:ring-df-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-df-primary dark:text-white",children:A("confirmPassword")}),(0,c.jsx)("input",{type:"password",id:"confirmPassword",value:f,onChange:e=>k(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-df-primary focus:ring-df-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"})]}),(0,c.jsx)("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-df-primary hover:bg-df-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-df-primary",children:A("updatePassword")})]})})]})})})]})},C=e=>{let{title:a}=e;const{t}=(0,h.Bd)();return(0,c.jsx)("div",{className:"mb-6",children:(0,c.jsx)("h2",{className:"text-xl font-semibold text-df-primary dark:text-white",children:a})})};var P=t(3),D=t(173);const z=()=>x.get("/tasks"),U=e=>x.post("/tasks",e),I=(e,a)=>x.patch("/tasks/".concat(e,"/status"),{status:a}),M=async e=>x.patch("/tasks/".concat(e,"/toggle")),E=(e,a)=>x.post("/tasks/".concat(e,"/comments"),{content:a}),_=(0,D.zD)("tasks/fetchTasks",(async(e,a)=>{let{showInactive:t=!1}=e,{rejectWithValue:r}=a;try{return(await z(t)).data}catch(e){var s;return r((null===(s=e.response)||void 0===s?void 0:s.data)||"Kunde inte hämta uppgifter")}})),F=(0,D.zD)("tasks/createTask",(async(e,a)=>{let{rejectWithValue:t}=a;try{const a=await U(e);return j.oR.success("Uppgift skapad"),a.data}catch(e){var r;return j.oR.error("Kunde inte skapa uppgift"),t(null===(r=e.response)||void 0===r?void 0:r.data)}})),L=(0,D.zD)("tasks/updateStatus",(async(e,a)=>{let{taskId:t,status:r}=e,{rejectWithValue:s}=a;try{return(await I(t,r)).data}catch(e){var d;return j.oR.error("Kunde inte uppdatera status"),s(null===(d=e.response)||void 0===d?void 0:d.data)}})),R=(0,D.zD)("tasks/toggleStatus",(async(e,a)=>{let{rejectWithValue:t}=a;try{return(await M(e)).data}catch(e){var r;return j.oR.error("Kunde inte ändra uppgiftsstatus"),t(null===(r=e.response)||void 0===r?void 0:r.data)}})),O=(0,D.zD)("tasks/addComment",(async(e,a)=>{let{taskId:t,content:r}=e,{rejectWithValue:s}=a;try{return(await E(t,r)).data}catch(e){var d;return j.oR.error("Kunde inte lägga till kommentar"),s(null===(d=e.response)||void 0===d?void 0:d.data)}})),B=(0,D.Z0)({name:"tasks",initialState:{items:[],loading:!1,error:null,selectedTask:null},reducers:{setSelectedTask:(e,a)=>{e.selectedTask=a.payload},optimisticUpdateTask:(e,a)=>{const t=a.payload,r=e.items.findIndex((e=>e._id===t._id));-1!==r&&(e.items[r]=(0,i.A)((0,i.A)({},e.items[r]),t))},optimisticAddComment:(e,a)=>{var t;const{taskId:r,comment:s}=a.payload,d=e.items.find((e=>e._id===r));d&&(d.comments||(d.comments=[]),d.comments.unshift(s)),(null===(t=e.selectedTask)||void 0===t?void 0:t._id)===r&&(e.selectedTask.comments||(e.selectedTask.comments=[]),e.selectedTask.comments.unshift(s))}},extraReducers:e=>{e.addCase(_.pending,(e=>{e.loading=!0,e.error=null})).addCase(_.fulfilled,((e,a)=>{e.loading=!1,e.items=a.payload})).addCase(_.rejected,((e,a)=>{e.loading=!1,e.error=a.payload})).addCase(F.fulfilled,((e,a)=>{e.items.push(a.payload)})).addCase(L.fulfilled,((e,a)=>{var t;const r=a.payload,s=e.items.findIndex((e=>e._id===r._id));-1!==s&&(e.items[s]=r),(null===(t=e.selectedTask)||void 0===t?void 0:t._id)===r._id&&(e.selectedTask=r)})).addCase(R.fulfilled,((e,a)=>{var t;const r=a.payload,s=e.items.findIndex((e=>e._id===r._id));-1!==s&&(e.items[s]=r),(null===(t=e.selectedTask)||void 0===t?void 0:t._id)===r._id&&(e.selectedTask=r)})).addCase(O.fulfilled,((e,a)=>{var t;const r=a.payload,s=e.items.findIndex((e=>e._id===r._id));-1!==s&&(e.items[s]=r),(null===(t=e.selectedTask)||void 0===t?void 0:t._id)===r._id&&(e.selectedTask=r)}))}}),{setSelectedTask:q,optimisticUpdateTask:K,optimisticAddComment:W}=B.actions,V=B.reducer;const Z=function(){const e=(0,P.wA)(),{items:a,loading:t,error:s,selectedTask:d}=(0,P.d4)((e=>e.tasks)),[n,m]=(0,r.useState)([]),[u,p]=(0,r.useState)(null),[y,f]=(0,r.useState)(!1),[k]=(0,r.useState)(new Date),[v,N]=(0,r.useState)(!1),[D,z]=(0,r.useState)(null),[U,I]=(0,r.useState)(!1),{user:M}=g(),{t:E}=(0,h.Bd)(),{getStatusClass:B,renderStatus:V}=(()=>{const{t:e}=(0,h.Bd)();return{getStatusClass:e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"in progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"cannot fix":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},renderStatus:a=>{switch(a){case"pending":return e("pending");case"in progress":return e("inProgress");case"completed":return e("completed");case"cannot fix":return e("cannotFix");default:return a}}}})(),{translateTask:Z,translateTasks:J,currentLanguage:H}=w();(0,r.useEffect)((()=>{const e=localStorage.getItem("token");if(e){const a=(0,o.s)(e);p(a)}}),[]),(0,r.useEffect)((()=>{e(_({showInactive:U}))}),[e,U]),(0,r.useEffect)((()=>{(async()=>{var a;if(d&&(null===(a=d.comments)||void 0===a?void 0:a.length)>0){const a=await Z(d);e(q(a))}})()}),[H,null==d?void 0:d._id]);const G=e=>{var a;return!(!M||!e)&&("ADMIN"===M.role||"SUPERADMIN"===M.role||(null===(a=e.assignedTo)||void 0===a?void 0:a._id)===M._id)},Y=new Date(k.getFullYear(),k.getMonth()+1,0).getDate(),Q=new Date(k.getFullYear(),k.getMonth(),1).getDay(),X="ADMIN"===(null==M?void 0:M.role)||"SUPERADMIN"===(null==M?void 0:M.role);return t?(0,c.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,c.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-df-primary"})}):(0,c.jsxs)("div",{className:"min-h-screen bg-df-light dark:bg-dark pt-20 px-4 sm:px-6 lg:px-8",children:[(0,c.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,c.jsx)(C,{title:E("tasks")}),(0,c.jsx)("div",{className:"flex items-center space-x-4",children:X&&(0,c.jsxs)("label",{className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300",children:[(0,c.jsx)("input",{type:"checkbox",checked:U,onChange:e=>I(e.target.checked),className:"form-checkbox h-4 w-4 text-df-primary rounded border-gray-300 focus:ring-df-primary dark:border-gray-600 dark:bg-gray-700"}),(0,c.jsx)("span",{children:E("showInactive")})]})})]}),(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[(0,c.jsx)("div",{className:"flex justify-between items-center p-4",children:(0,c.jsx)("h2",{className:"text-xl font-semibold text-df-primary dark:text-white",children:"".concat((e=>{const a=e.getMonth();return E(["months.january","months.february","months.march","months.april","months.may","months.june","months.july","months.august","months.september","months.october","months.november","months.december"][a])})(k)," ").concat(k.getFullYear())})}),(0,c.jsxs)("div",{className:"grid grid-cols-7 gap-px bg-gray-200 dark:bg-gray-700",children:[{en:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],sv:["Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag","Söndag"],pl:["Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota","Niedziela"],uk:["Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота","Неділя"]}[l.Ay.language].map((e=>(0,c.jsx)("div",{className:"bg-white dark:bg-gray-800 p-2",children:(0,c.jsx)("h3",{className:"text-sm font-medium text-df-primary dark:text-white",children:e})},e))),Array.from({length:Q-1}).map(((e,a)=>(0,c.jsx)("div",{className:"bg-white dark:bg-gray-800 p-4 min-h-[120px]"},"empty-".concat(a)))),Array.from({length:Y}).map(((t,r)=>{const s=new Date(k.getFullYear(),k.getMonth(),r+1),d=a.filter((e=>(0,b.A)(new Date(e.dueDate),"yyyy-MM-dd")===(0,b.A)(s,"yyyy-MM-dd")));return(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 min-h-[120px] ".concat(X?"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700":""),onClick:e=>{e.target===e.currentTarget&&X&&(e=>{M&&"ADMIN"!==!M.role&&(z(e),N(!0))})(s)},children:[(0,c.jsx)("p",{className:"text-sm text-df-primary/70 dark:text-gray-400",children:r+1}),(0,c.jsx)("div",{className:"space-y-2",children:d.map((a=>{var t;return(0,c.jsxs)("div",{className:"p-2 rounded-lg ".concat(G(a)?"bg-df-primary/10 dark:bg-gray-700 hover:bg-df-primary/20 dark:hover:bg-gray-600":"bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700"," cursor-pointer transition-colors duration-150 ").concat(a.isActive?"":"opacity-50"),onClick:()=>(async a=>{if(a)try{const t=await Z(a);e(q(t))}catch(t){e(q(a))}})(a),children:[(0,c.jsx)("div",{className:"text-sm font-medium text-df-primary dark:text-white truncate",children:a.title}),(0,c.jsxs)("div",{className:"mt-1 flex items-center justify-between",children:[(0,c.jsx)("span",{className:"px-2 text-xs font-semibold rounded-full ".concat(B(a.status)),children:V(a.status)}),(0,c.jsx)("span",{className:"text-xs text-df-primary/70 dark:text-gray-400",children:(null===(t=a.assignedTo)||void 0===t?void 0:t.name)||E("unassigned")})]})]},a._id)}))})]},r)}))]})]})]})}),d&&(0,c.jsx)(S,{task:d,onClose:()=>e(q(null)),onStatusUpdate:async(a,t)=>{try{e(K((0,i.A)((0,i.A)({},a),{},{status:t}))),await e(L({taskId:a._id,status:t})).unwrap()}catch(t){e(K((0,i.A)((0,i.A)({},a),{},{status:a.status}))),j.oR.error(E("errorUpdatingStatus"))}},onAddComment:async(a,t)=>{try{const r={_id:Date.now().toString(),content:t,createdBy:M,createdAt:(new Date).toISOString(),isActive:!0};e(W({taskId:a,comment:r})),await e(O({taskId:a,content:t})).unwrap()}catch(e){j.oR.error(E("errorAddingComment"))}},onArchive:async a=>{try{e(K((0,i.A)((0,i.A)({},a),{},{isActive:!a.isActive}))),await e(R(a._id)).unwrap(),e(q(null))}catch(t){e(K((0,i.A)((0,i.A)({},a),{},{isActive:a.isActive}))),j.oR.error(E("errorTogglingTaskStatus"))}},onEdit:async a=>{try{await x.patch("/tasks/".concat(a._id),a),e(_({showInactive:U})),j.oR.success(E("taskUpdated"))}catch(e){j.oR.error(E("errorUpdatingTask"))}},userRole:null==M?void 0:M.role,userId:null==M?void 0:M._id,getStatusClass:B,renderStatus:V,users:n}),v&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-df-primary dark:text-white mb-4",children:E("newTask")}),(0,c.jsx)(A,{onSubmit:async a=>{try{await e(F((0,i.A)((0,i.A)({},a),{},{dueDate:D}))).unwrap(),N(!1),z(null)}catch(e){throw e}},onCancel:()=>{N(!1),z(null)},users:n})]})}),y&&(0,c.jsx)(T,{user:M,onClose:()=>f(!1)})]})},J=()=>{const{user:e,updateUser:a}=g(),[t,s]=(0,r.useState)(""),[d,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[l,m]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[y,f]=(0,r.useState)(""),[k,v]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),{t:j}=(0,h.Bd)();(0,r.useEffect)((()=>{e&&(s(e.name||""),n(e.email||""),o(e.preferredLanguage||"en"))}),[e]);return(0,c.jsx)("div",{className:"min-h-screen bg-df-light dark:bg-dark pt-20 px-4 sm:px-6 lg:px-8",children:(0,c.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold text-df-primary dark:text-white mb-6",children:j("profile")}),l&&(0,c.jsx)("div",{className:"mb-6 p-3 rounded-lg bg-df-primary/10 dark:bg-df-primary/20 text-df-primary dark:text-white",children:l}),(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await(async e=>{try{return(await x.patch("/profile",e)).data}catch(e){throw e}})({name:t,email:d,preferredLanguage:i});e.status&&(a(e.user),m(j("profileUpdated")))}catch(e){m(j("errorUpdatingProfile"))}},className:"space-y-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-df-primary dark:text-white mb-1",children:j("name")}),(0,c.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-df-primary dark:text-white focus:ring-df-primary focus:border-df-primary"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-df-primary dark:text-white mb-1",children:j("email")}),(0,c.jsx)("input",{type:"email",value:d,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-df-primary dark:text-white focus:ring-df-primary focus:border-df-primary"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-df-primary dark:text-white mb-1",children:j("preferredLanguage")}),(0,c.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-df-primary dark:text-white focus:ring-df-primary focus:border-df-primary",children:[(0,c.jsx)("option",{value:"sv",children:j("swedish")}),(0,c.jsx)("option",{value:"pl",children:j("polish")}),(0,c.jsx)("option",{value:"uk",children:j("ukrainian")}),(0,c.jsx)("option",{value:"en",children:j("english")})]})]}),(0,c.jsx)("button",{type:"submit",className:"w-full py-2 px-4 rounded-md bg-df-primary hover:bg-df-primary/90 text-white font-medium transition-colors duration-150",children:j("updateProfile")})]}),(0,c.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200 dark:border-gray-700",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-df-primary dark:text-white mb-6",children:j("changePassword")}),u&&(0,c.jsx)("div",{className:"mb-6 p-3 rounded-lg bg-df-primary/10 dark:bg-df-primary/20 text-df-primary dark:text-white",children:u}),(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),k===b)try{(await(async e=>{try{return(await x.patch("/profile/change-password",e)).data}catch(e){throw e}})({currentPassword:y,newPassword:k})).status&&(p(j("passwordUpdated")),f(""),v(""),w(""))}catch(e){p(j("errorUpdatingPassword"))}else p(j("passwordsDoNotMatch"))},className:"space-y-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-df-primary dark:text-white mb-1",children:j("currentPassword")}),(0,c.jsx)("input",{type:"password",value:y,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-df-primary dark:text-white focus:ring-df-primary focus:border-df-primary"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-df-primary dark:text-white mb-1",children:j("newPassword")}),(0,c.jsx)("input",{type:"password",value:k,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-df-primary dark:text-white focus:ring-df-primary focus:border-df-primary"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-df-primary dark:text-white mb-1",children:j("confirmNewPassword")}),(0,c.jsx)("input",{type:"password",value:b,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-df-primary dark:text-white focus:ring-df-primary focus:border-df-primary"})]}),(0,c.jsx)("button",{type:"submit",className:"w-full py-2 px-4 rounded-md bg-df-primary hover:bg-df-primary/90 text-white font-medium transition-colors duration-150",children:j("updatePassword")})]})]})]})})})},H=(0,r.createContext)();function G(e){let{children:a}=e;const[t,s]=(0,r.useState)((()=>{const e=localStorage.getItem("theme");return"dark"===e||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches}));(0,r.useEffect)((()=>{t?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))}),[t]);return(0,c.jsx)(H.Provider,{value:{darkMode:t,toggleTheme:()=>{s(!t)}},children:a})}const Y=()=>{const{user:e,logout:a}=g(),{darkMode:t,toggleTheme:s}=(0,r.useContext)(H),i=(0,d.Zp)(),{t:o}=(0,h.Bd)(),[l,m]=(0,r.useState)(0);(0,r.useEffect)((()=>{const a=async()=>{if("ADMIN"===(null==e?void 0:e.role)||"SUPERADMIN"===(null==e?void 0:e.role))try{var a;const e=await x.get("/tasks/pending");m((null===(a=e.data.pendingTasks)||void 0===a?void 0:a.length)||0)}catch(e){}};a();const t=setInterval(a,3e4);return()=>clearInterval(t)}),[e]);const u="ADMIN"===(null==e?void 0:e.role)||"SUPERADMIN"===(null==e?void 0:e.role);return(0,c.jsx)("nav",{className:"fixed top-0 left-0 right-0 bg-white dark:bg-gray-800 shadow-lg dark:shadow-[0_4px_12px_0_rgba(0,0,0,0.5)] z-[60]",children:(0,c.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,c.jsxs)("div",{className:"flex justify-between h-16",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsx)(n.N_,{to:e?"/dftasks/month-view":"/dftasks",className:"text-xl font-bold text-df-primary dark:text-white",children:"DFTasks"}),(0,c.jsx)("div",{className:"scale-75 sm:scale-100",children:(0,c.jsx)(k,{})}),e&&u&&(0,c.jsxs)("div",{className:"flex space-x-2 sm:space-x-6",children:[(0,c.jsxs)(n.N_,{to:"/dftasks/month-view",className:"group relative p-2 text-df-primary dark:text-white hover:text-df-primary/80 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:o("tasks"),children:[(0,c.jsx)(N.w8j,{className:"text-xl"}),(0,c.jsx)("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-800 dark:bg-gray-700 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:o("tasks")})]}),(0,c.jsxs)(n.N_,{to:"/dftasks/pending-tasks",className:"group relative p-2 text-df-primary dark:text-white hover:text-df-primary/80 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:o("pending.tasks"),children:[(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(N.kkc,{className:"text-xl"}),l>0&&(0,c.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:l})]}),(0,c.jsx)("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-800 dark:bg-gray-700 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:o("pending.tasks")})]}),(0,c.jsxs)(n.N_,{to:"/dftasks/users",className:"group relative p-2 text-df-primary dark:text-white hover:text-df-primary/80 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:o("users"),children:[(0,c.jsx)(N.YXz,{className:"text-xl"}),(0,c.jsx)("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-800 dark:bg-gray-700 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:o("users")})]})]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsxs)("button",{onClick:s,className:"group relative p-2 rounded-lg text-df-primary dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:o(t?"light.mode":"dark.mode"),children:[t?(0,c.jsx)(N.wQq,{className:"text-xl"}):(0,c.jsx)(N.V6H,{className:"text-xl"}),(0,c.jsx)("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-800 dark:bg-gray-700 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:o(t?"light.mode":"dark.mode")})]}),e&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.N_,{to:"/dftasks/profile",className:"group relative p-2 text-df-primary dark:text-white hover:text-df-primary/80 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:o("profile"),children:[(0,c.jsx)(N.x$1,{className:"text-xl"}),(0,c.jsx)("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-800 dark:bg-gray-700 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:e.name})]}),(0,c.jsxs)("button",{onClick:()=>{a(),i("/dftasks/login")},className:"group relative p-2 text-df-primary dark:text-white hover:text-df-primary/80 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:o("logout"),children:[(0,c.jsx)(N.axc,{className:"text-xl"}),(0,c.jsx)("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-800 dark:bg-gray-700 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:o("logout")})]})]})]})]})})})};const Q=function(e){let{task:a,users:t,onClose:s,onApprove:d}=e;const[n,i]=(0,r.useState)(""),[o,l]=(0,r.useState)((0,b.A)(new Date,"yyyy-MM-dd")),{t:m}=(0,h.Bd)();return(0,c.jsxs)("div",{className:"fixed inset-0 z-[55] overflow-y-auto",children:[(0,c.jsx)("div",{className:"fixed inset-0 bg-black/30",onClick:s}),(0,c.jsx)("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:(0,c.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl",children:[(0,c.jsx)("div",{className:"sticky top-0 z-[56] bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("h3",{className:"text-lg font-medium text-df-primary dark:text-white",children:m("reviewTask")}),(0,c.jsxs)("button",{onClick:s,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:[(0,c.jsx)("span",{className:"sr-only",children:m("close")}),(0,c.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]})}),(0,c.jsx)("div",{className:"p-6",children:(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,c.jsx)("h4",{className:"text-sm font-medium text-df-primary dark:text-white mb-2",children:m("reporterInfo")}),(0,c.jsxs)("dl",{className:"grid grid-cols-1 gap-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:[m("name"),":"]}),(0,c.jsx)("dd",{className:"text-sm text-gray-900 dark:text-white",children:a.reporterName})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:[m("email"),":"]}),(0,c.jsx)("dd",{className:"text-sm text-gray-900 dark:text-white",children:a.reporterEmail})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:[m("phone"),":"]}),(0,c.jsx)("dd",{className:"text-sm text-gray-900 dark:text-white",children:a.reporterPhone})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:[m("address"),":"]}),(0,c.jsxs)("dd",{className:"text-sm text-gray-900 dark:text-white",children:[a.address," - ",a.apartmentNumber]})]})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"text-sm font-medium text-df-primary dark:text-white mb-2",children:m("taskDetails")}),(0,c.jsx)("div",{className:"space-y-4",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:m("description")}),(0,c.jsx)("div",{className:"mt-1 p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:(0,c.jsx)("p",{className:"text-sm text-gray-900 dark:text-white whitespace-pre-wrap",children:a.description})})]})})]}),(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d(a._id,{assignedTo:n,dueDate:new Date(o)})},className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"assignedTo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:m("assignTo")}),(0,c.jsxs)("select",{id:"assignedTo",value:n,onChange:e=>i(e.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-df-primary focus:ring focus:ring-df-primary focus:ring-opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,c.jsx)("option",{value:"",children:m("selectUser")}),t.map((e=>(0,c.jsx)("option",{value:e._id,children:e.name},e._id)))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:m("dueDate")}),(0,c.jsx)("input",{type:"date",id:"dueDate",value:o,onChange:e=>l(e.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-df-primary focus:ring focus:ring-df-primary focus:ring-opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,c.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,c.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",children:m("cancel")}),(0,c.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-df-primary rounded-md hover:bg-df-primary/90",children:m("approve")})]})]})]})})]})})]})};const X=function(){const[e,a]=(0,r.useState)([]),[t,s]=(0,r.useState)(null),[d,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(""),{t:l}=(0,h.Bd)(),{user:m}=g(),u=(0,r.useCallback)((async()=>{try{o("");const e=await x.get("/tasks/pending");a(e.data.pendingTasks||[])}catch(r){var e,t;403===(null===(e=r.response)||void 0===e?void 0:e.status)?o(l("accessDenied")):400===(null===(t=r.response)||void 0===t?void 0:t.status)?o(l("invalidRequest")):o(l("errorFetchingTasks")),a([])}}),[l]),p=(0,r.useCallback)((async()=>{try{const e=await x.get("/users");n(e.data)}catch(e){}}),[]);return(0,r.useEffect)((()=>{"ADMIN"===(null==m?void 0:m.role)||"SUPERADMIN"===(null==m?void 0:m.role)?(u(),p()):o(l("accessDenied"))}),[m,u,p,l]),(0,c.jsx)("div",{className:"min-h-screen bg-df-light dark:bg-dark pt-20 px-4 sm:px-6 lg:px-8",children:(0,c.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,c.jsx)(C,{title:l("pendingTasks")}),i?(0,c.jsx)("div",{className:"p-4 bg-red-100 dark:bg-red-900/50 border border-red-400 text-red-700 dark:text-red-200 rounded relative",children:(0,c.jsx)("span",{className:"block sm:inline",children:i})}):(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,c.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:l("title")}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:l("reporter")}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:l("receivedAt")}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:l("actions")})]})}),(0,c.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:0===e.length?(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:l("noPendingTasks")})}):e.map((e=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("div",{className:"text-sm font-medium text-df-primary dark:text-white",children:e.title})}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-300",children:e.reporterName}),(0,c.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.reporterEmail})]}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-300",children:(0,b.A)(new Date(e.createdAt),"yyyy-MM-dd HH:mm")})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("button",{onClick:()=>s(e),className:"text-df-primary hover:text-df-primary/80 dark:text-df-accent dark:hover:text-df-accent/80",children:l("review")})})]},e._id)))})]})}),t&&(0,c.jsx)(Q,{task:t,users:d,onClose:()=>s(null),onApprove:async(e,a)=>{try{o(""),await x.post("/tasks/pending/".concat(e,"/approve"),a),u(),s(null)}catch(e){var t;403===(null===(t=e.response)||void 0===t?void 0:t.status)?o(l("accessDenied")):o(l("errorApprovingTask"))}}})]})})})};const $=function(){const[e,a]=(0,r.useState)([]),[t,s]=(0,r.useState)(!0),[d,n]=(0,r.useState)(""),[l,m]=(0,r.useState)(null),[u,p]=(0,r.useState)(!1),[y,f]=(0,r.useState)(!1),{t:k}=(0,h.Bd)(),{user:v}=g();(0,r.useEffect)((()=>{const e=localStorage.getItem("token");if(e){const a=(0,o.s)(e);"SUPERADMIN"===a.role||"ADMIN"===a.role?b():n(k("accessDenied"))}else n(k("accessDenied"))}),[k]);const b=(0,r.useCallback)((async()=>{try{n("");const e=u?"/users/all":"/users",t=await x.get(e);let r=[];t.data&&Array.isArray(t.data)?r=t.data:t.data&&Array.isArray(t.data.users)?r=t.data.users:t.data&&Array.isArray(t.data.data)&&(r=t.data.data);const d=r.map((e=>(0,i.A)((0,i.A)({},e),{},{displayRole:"SUPERADMIN"===(null==v?void 0:v.role)?e.role:"SUPERADMIN"===e.role?"ADMIN":e.role})));a(d),s(!1)}catch(t){var e;403===(null===(e=t.response)||void 0===e?void 0:e.status)?n(k("accessDenied")):n(k("errorFetchingUsers")),a([]),s(!1)}}),[k,u,v]);return(0,r.useEffect)((()=>{b()}),[b,u]),t?(0,c.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,c.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-df-primary"})}):(0,c.jsx)("div",{className:"min-h-screen bg-df-light dark:bg-dark pt-20 px-4 sm:px-6 lg:px-8",children:(0,c.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,c.jsx)(C,{title:k("users")}),(0,c.jsx)("div",{className:"mb-4 flex items-center",children:(0,c.jsxs)("label",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-300",children:[(0,c.jsx)("input",{type:"checkbox",checked:u,onChange:e=>p(e.target.checked),className:"rounded border-gray-300 text-df-primary focus:ring-df-primary dark:border-gray-600 dark:bg-gray-700"}),(0,c.jsx)("span",{children:k("showInactive")})]})}),d?(0,c.jsx)("div",{className:"p-4 bg-red-100 dark:bg-red-900/50 border border-red-400 text-red-700 dark:text-red-200 rounded relative",children:(0,c.jsx)("span",{className:"block sm:inline",children:d})}):(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,c.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:k("name")}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:k("email")}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:k("role")}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:k("status")}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:k("actions")})]})}),(0,c.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:0===e.length?(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:k("noUsers")})}):e.map((e=>{return(0,c.jsxs)("tr",{onClick:()=>(e=>{e._id!==(null==v?void 0:v.id)&&"SUPERADMIN"!==(null==v?void 0:v.role)&&("ADMIN"!==(null==v?void 0:v.role)||"SUPERADMIN"===e.displayRole)||m(e)})(e),className:"".concat(e.isActive?"":"opacity-50"," hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer"),children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("div",{className:"text-sm font-medium text-df-primary dark:text-white",children:e.name})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-300",children:e.email})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("ADMIN"===e.displayRole?"bg-purple-100 text-purple-800 dark:bg-purple-800 dark:text-purple-100":"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100"),children:e.displayRole})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:e.isActive?k("active"):k("inactive")})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(a=e,"USER"!==(null==v?void 0:v.role)&&a._id!==(null==v?void 0:v.id)&&("SUPERADMIN"===(null==v?void 0:v.role)||"ADMIN"===(null==v?void 0:v.role)&&"SUPERADMIN"!==a.displayRole)&&(0,c.jsx)("button",{onClick:a=>{a.stopPropagation(),(async e=>{try{n(""),await x.patch("/users/".concat(e,"/toggle-status")),await b(),m(null)}catch(e){n(k("errorTogglingUserStatus"))}})(e._id)},className:"text-df-primary hover:text-df-primary/80 dark:text-df-accent dark:hover:text-df-accent/80",children:e.isActive?k("deactivate"):k("activate")}))})]},e._id);var a}))})]})}),(l||y)&&(0,c.jsx)(T,{user:l,onClose:()=>{m(null),f(!1)},onEdit:async t=>{try{n("");const r=await x.put("/users/".concat(l._id),t);r.data&&(a(e.map((e=>e._id===l._id?r.data:e))),m(null))}catch(e){var r,s,d,i;400===(null===(r=e.response)||void 0===r?void 0:r.status)?alert(e.response.data.message||k("invalidData")):401===(null===(s=e.response)||void 0===s?void 0:s.status)?alert(k("unauthorized")):403===(null===(d=e.response)||void 0===d?void 0:d.status)?alert(k("notAuthorized")):409===(null===(i=e.response)||void 0===i?void 0:i.status)?alert(k("emailAlreadyExists")):alert(k("errorUpdatingUser"))}},onSubmit:async e=>{try{n(""),await x.post("/users",e),await b(),f(!1)}catch(e){alert(k("errorCreatingUser"))}},isCreating:y})]})})})};function ee(){const{user:e}=g();return e?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Y,{}),(0,c.jsxs)(d.BV,{children:[(0,c.jsx)(d.qh,{path:"/dftasks/month-view",element:(0,c.jsx)(Z,{})}),(0,c.jsx)(d.qh,{path:"/dftasks/profile",element:(0,c.jsx)(J,{})}),(0,c.jsx)(d.qh,{path:"/dftasks/pending-tasks",element:(0,c.jsx)(X,{})}),(0,c.jsx)(d.qh,{path:"/dftasks/users",element:(0,c.jsx)($,{})}),(0,c.jsx)(d.qh,{path:"/dftasks/login",element:(0,c.jsx)(d.C5,{to:"/dftasks/month-view",replace:!0})}),(0,c.jsx)(d.qh,{path:"/dftasks",element:(0,c.jsx)(d.C5,{to:"/dftasks/month-view",replace:!0})}),(0,c.jsx)(d.qh,{path:"/",element:(0,c.jsx)(d.C5,{to:"/dftasks/month-view",replace:!0})}),(0,c.jsx)(d.qh,{path:"*",element:(0,c.jsx)(d.C5,{to:"/dftasks/month-view",replace:!0})})]})]}):(0,c.jsxs)(d.BV,{children:[(0,c.jsx)(d.qh,{path:"/dftasks/login",element:(0,c.jsx)(v,{})}),(0,c.jsx)(d.qh,{path:"*",element:(0,c.jsx)(d.C5,{to:"/dftasks/login",replace:!0})})]})}const ae=function(){return(0,c.jsx)(n.Kd,{children:(0,c.jsx)(ee,{})})};var te=t(115);t(342);const re={en:{translation:JSON.parse('{"login":"Login","loggingIn":"Logging in...","email":"Email","password":"Password","error":"Error","allFieldsRequired":"All fields are required","loginError":"Login failed","tasks":"Tasks","pendingTasks":"Pending Tasks","noTasks":"No tasks to display","noPendingTasks":"No pending tasks","taskNotFound":"Task not found","title":"Title","description":"Description","status":"Status","assignedTo":"Assigned to","dueDate":"Due date","unassigned":"Unassigned","details":"Details","pending":"Pending","inProgress":"In Progress","completed":"Completed","cannotFix":"Cannot Fix","updateStatus":"Update Status","comments":"Comments","writeComment":"Write a comment...","send":"Send","sending":"Sending...","errorAddingComment":"Could not add comment","errorUpdatingStatus":"Could not update status","errorFetchingTask":"Could not fetch task","errorFetchingTasks":"Could not fetch tasks","errorFetchingPendingTasks":"Could not fetch pending tasks","reviewTask":"Review Task","reporterInfo":"Reporter Information","name":"Name","phone":"Phone","address":"Address","assignTask":"Assign Task","approve":"Approve","cancel":"Cancel","taskApproved":"Task has been approved","errorApprovingTask":"Could not approve task","success":"Success","loading":"Loading...","changePassword":"Change Password","currentPassword":"Current Password","newPassword":"New Password","confirmNewPassword":"Confirm New Password","updatePassword":"Update Password","passwordsDoNotMatch":"The new passwords do not match","passwordUpdated":"Password has been updated","errorUpdatingPassword":"An error occurred while updating the password","months":{"january":"January","february":"February","march":"March","april":"April","may":"May","june":"June","july":"July","august":"August","september":"September","october":"October","november":"November","december":"December"},"updateProfile":"Update Profile","profileUpdated":"Profile has been updated","invalidData":"Invalid data provided","unauthorized":"Unauthorized access","emailAlreadyExists":"Email already exists","userSettings":"User Settings","close":"Close","preferredLanguage":"Preferred Language","accessDenied":"Access Denied","errorFetchingUsers":"Could not fetch users","errorUpdatingUser":"Could not update user","errorTogglingUserStatus":"Could not toggle user status","errorCreatingUser":"Could not create user","users":"Users","role":"Role","actions":"Actions","noUsers":"No users to display","active":"Active","inactive":"Inactive","edit":"Edit","deactivate":"Deactivate","activate":"Activate","selectRole":"Select Role","user":"User","admin":"Admin","submit":"Submit","welcome":"Welcome","save":"Save","noComments":"No comments","deleteConfirm":"Are you sure you want to delete this?","errorDeletingTask":"Could not delete task","errorSavingTask":"Could not save task","noDate":"No date set","errorTogglingCommentStatus":"Could not toggle comment status","showArchived":"Show Archived","showInactive":"Show Inactive","newTask":"New Task","pending.tasks":"Pending Tasks","light.mode":"Light Mode","dark.mode":"Dark Mode","profile":"Profile","profile.settings":"Profile Settings","swedish":"Swedish","polish":"Polish","ukrainian":"Ukrainian","english":"English","propertyManagement":"Property Management","forgotPassword":"Forgot Password","enterEmail":"Enter Email","enterPassword":"Enter Password","archive":"Archive","unarchive":"Unarchive","errorTogglingTaskStatus":"Could not toggle task status"}')},sv:{translation:JSON.parse('{"login":"Logga in","loggingIn":"Loggar in...","email":"E-post","password":"Lösenord","error":"Fel","allFieldsRequired":"Alla fält måste fyllas i","loginError":"Inloggningen misslyckades","tasks":"Uppgifter","pendingTasks":"Väntande uppgifter","noTasks":"Inga uppgifter att visa","noPendingTasks":"Inga väntande uppgifter","taskNotFound":"Uppgiften hittades inte","title":"Titel","description":"Beskrivning","status":"Status","assignedTo":"Tilldelad till","dueDate":"Förfallodatum","unassigned":"Ej tilldelad","details":"Detaljer","pending":"Väntande","inProgress":"Pågående","completed":"Slutförd","cannotFix":"Kan ej åtgärda","updateStatus":"Uppdatera status","comments":"Kommentarer","writeComment":"Skriv en kommentar...","send":"Skicka","sending":"Skickar...","errorAddingComment":"Kunde inte lägga till kommentar","errorUpdatingStatus":"Kunde inte uppdatera status","errorFetchingTask":"Kunde inte hämta uppgift","errorFetchingTasks":"Kunde inte hämta uppgifter","errorFetchingPendingTasks":"Kunde inte hämta väntande uppgifter","reviewTask":"Granska uppgift","reporterInfo":"Felanmälarens information","name":"Namn","phone":"Telefon","address":"Adress","assignTask":"Tilldela uppgift","approve":"Godkänn","cancel":"Avbryt","taskApproved":"Uppgiften har godkänts","errorApprovingTask":"Kunde inte godkänna uppgiften","success":"Klart","loading":"Laddar...","changePassword":"Byt lösenord","currentPassword":"Nuvarande lösenord","newPassword":"Nytt lösenord","confirmNewPassword":"Bekräfta nytt lösenord","updatePassword":"Uppdatera lösenord","passwordsDoNotMatch":"De nya lösenorden matchar inte","passwordUpdated":"Lösenordet har uppdaterats","errorUpdatingPassword":"Ett fel uppstod när lösenordet skulle uppdateras","months":{"january":"Januari","february":"Februari","march":"Mars","april":"April","may":"Maj","june":"Juni","july":"Juli","august":"Augusti","september":"September","october":"Oktober","november":"November","december":"December"},"updateProfile":"Uppdatera profil","profileUpdated":"Profilen har uppdaterats","invalidData":"Ogiltig data angiven","unauthorized":"Obehörig åtkomst","emailAlreadyExists":"E-postadressen finns redan","userSettings":"Användarinställningar","close":"Stäng","preferredLanguage":"Föredraget språk","accessDenied":"Åtkomst nekad","errorFetchingUsers":"Kunde inte hämta användare","errorUpdatingUser":"Kunde inte uppdatera användare","errorTogglingUserStatus":"Kunde inte ändra användarstatus","errorCreatingUser":"Kunde inte skapa användare","users":"Användare","role":"Roll","actions":"Åtgärder","noUsers":"Inga användare att visa","active":"Aktiv","inactive":"Inaktiv","edit":"Redigera","deactivate":"Inaktivera","activate":"Aktivera","selectRole":"Välj roll","user":"Användare","admin":"Administratör","submit":"Skicka","welcome":"Välkommen","save":"Spara","noComments":"Inga kommentarer","deleteConfirm":"Är du säker på att du vill ta bort detta?","errorDeletingTask":"Kunde inte ta bort uppgiften","errorSavingTask":"Kunde inte spara uppgiften","noDate":"Inget datum satt","errorTogglingCommentStatus":"Kunde inte ändra kommentarstatus","showArchived":"Visa arkiverade","showInactive":"Visa inaktiva","newTask":"Ny uppgift","pending.tasks":"Väntande uppgifter","light.mode":"Ljust läge","dark.mode":"Mörkt läge","profile":"Profil","profile.settings":"Profilinställningar","swedish":"Svenska","polish":"Polska","ukrainian":"Ukrainska","english":"Engelska","propertyManagement":"Fastighetsförvaltning","forgotPassword":"Glömt lösenord","enterEmail":"Ange e-postadress","enterPassword":"Ange lösenord","archive":"Arkivera","unarchive":"Återaktivera","selectUser":"Välj användare","markCompleted":"Markera som klar","markPending":"Markera som väntande","errorTogglingTaskStatus":"Kunde inte ändra uppgiftsstatus"}')},pl:{translation:JSON.parse('{"login":"Zaloguj się","loggingIn":"Logowanie...","email":"Email","password":"Hasło","error":"Błąd","allFieldsRequired":"Wszystkie pola są wymagane","loginError":"Logowanie nie powiodło się","tasks":"Zadania","pendingTasks":"Oczekujące zadania","noTasks":"Brak zadań do wyświetlenia","noPendingTasks":"Brak oczekujących zadań","taskNotFound":"Nie znaleziono zadania","title":"Tytuł","description":"Opis","status":"Status","assignedTo":"Przypisane do","dueDate":"Termin","unassigned":"Nieprzypisane","details":"Szczegóły","pending":"Oczekujące","inProgress":"W trakcie","completed":"Zakończone","cannotFix":"Nie można naprawić","updateStatus":"Aktualizuj status","comments":"Komentarze","writeComment":"Napisz komentarz...","send":"Wyślij","sending":"Wysyłanie...","errorAddingComment":"Nie można dodać komentarza","errorUpdatingStatus":"Nie można zaktualizować statusu","errorFetchingTask":"Nie można pobrać zadania","errorFetchingTasks":"Nie można pobrać zadań","errorFetchingPendingTasks":"Nie można pobrać oczekujących zadań","reviewTask":"Przejrzyj zadanie","reporterInfo":"Informacje o zgłaszającym","name":"Imię i nazwisko","phone":"Telefon","address":"Adres","assignTask":"Przypisz zadanie","approve":"Zatwierdź","cancel":"Anuluj","taskApproved":"Zadanie zostało zatwierdzone","errorApprovingTask":"Nie można zatwierdzić zadania","success":"Sukces","loading":"Ładowanie...","changePassword":"Zmień hasło","currentPassword":"Obecne hasło","newPassword":"Nowe hasło","confirmNewPassword":"Potwierdź nowe hasło","updatePassword":"Zaktualizuj hasło","passwordsDoNotMatch":"Nowe hasła nie są zgodne","passwordUpdated":"Hasło zostało zaktualizowane","errorUpdatingPassword":"Wystąpił błąd podczas aktualizacji hasła","months":{"january":"Styczeń","february":"Luty","march":"Marzec","april":"Kwiecień","may":"Maj","june":"Czerwiec","july":"Lipiec","august":"Sierpień","september":"Wrzesień","october":"Październik","november":"Listopad","december":"Grudzień"},"updateProfile":"Aktualizuj profil","profileUpdated":"Profil został zaktualizowany","invalidData":"Nieprawidłowe dane","unauthorized":"Brak autoryzacji","emailAlreadyExists":"Email już istnieje","userSettings":"Ustawienia użytkownika","close":"Zamknij","preferredLanguage":"Preferowany język","accessDenied":"Dostęp zabroniony","errorFetchingUsers":"Nie można pobrać użytkowników","errorUpdatingUser":"Nie można zaktualizować użytkownika","errorTogglingUserStatus":"Nie można zmienić statusu użytkownika","errorCreatingUser":"Nie można utworzyć użytkownika","users":"Użytkownicy","role":"Rola","actions":"Akcje","noUsers":"Brak użytkowników do wyświetlenia","active":"Aktywny","inactive":"Nieaktywny","edit":"Edytuj","deactivate":"Dezaktywuj","activate":"Aktywuj","selectRole":"Wybierz rolę","user":"Użytkownik","admin":"Administrator","submit":"Wyślij","welcome":"Witaj","save":"Zapisz","noComments":"Brak komentarzy","deleteConfirm":"Czy na pewno chcesz to usunąć?","errorDeletingTask":"Nie można usunąć zadania","errorSavingTask":"Nie można zapisać zadania","noDate":"Nie ustawiono daty","errorTogglingCommentStatus":"Nie można zmienić statusu komentarza","showArchived":"Pokaż zarchiwizowane","showInactive":"Pokaż nieaktywne","newTask":"Nowe zadanie","pending.tasks":"Oczekujące zadania","light.mode":"Tryb jasny","dark.mode":"Tryb ciemny","profile":"Profil","profile.settings":"Ustawienia profilu","swedish":"Szwedzki","polish":"Polski","ukrainian":"Ukraiński","english":"Angielski","propertyManagement":"Zarządzanie nieruchomościami","forgotPassword":"Zapomniałeś hasła","enterEmail":"Wprowadź adres email","enterPassword":"Wprowadź hasło","archive":"Archiwizuj","unarchive":"Przywróć","errorTogglingTaskStatus":"Nie można zmienić statusu zadania"}')},uk:{translation:JSON.parse('{"login":"Увійти","loggingIn":"Вхід...","email":"Електронна пошта","password":"Пароль","error":"Помилка","allFieldsRequired":"Всі поля обов\'язкові","loginError":"Помилка входу","tasks":"Завдання","pendingTasks":"Очікуючі завдання","noTasks":"Немає завдань для відображення","noPendingTasks":"Немає очікуючих завдань","taskNotFound":"Завдання не знайдено","title":"Назва","description":"Опис","status":"Статус","assignedTo":"Призначено","dueDate":"Термін виконання","unassigned":"Не призначено","details":"Деталі","pending":"Очікує","inProgress":"В процесі","completed":"Завершено","cannotFix":"Неможливо виправити","updateStatus":"Оновити статус","comments":"Коментарі","writeComment":"Написати коментар...","send":"Надіслати","sending":"Надсилання...","errorAddingComment":"Не вдалося додати коментар","errorUpdatingStatus":"Не вдалося оновити статус","errorFetchingTask":"Не вдалося отримати завдання","errorFetchingTasks":"Не вдалося отримати завдання","errorFetchingPendingTasks":"Не вдалося отримати очікуючі завдання","reviewTask":"Переглянути завдання","reporterInfo":"Інформація про заявника","name":"Ім\'я","phone":"Телефон","address":"Адреса","assignTask":"Призначити завдання","approve":"Підтвердити","cancel":"Скасувати","taskApproved":"Завдання підтверджено","errorApprovingTask":"Не вдалося підтвердити завдання","success":"Успішно","loading":"Завантаження...","changePassword":"Змінити пароль","currentPassword":"Поточний пароль","newPassword":"Новий пароль","confirmNewPassword":"Підтвердіть новий пароль","updatePassword":"Оновити пароль","passwordsDoNotMatch":"Нові паролі не співпадають","passwordUpdated":"Пароль оновлено","errorUpdatingPassword":"Виникла помилка під час оновлення пароля","months":{"january":"Січень","february":"Лютий","march":"Березень","april":"Квітень","may":"Травень","june":"Червень","july":"Липень","august":"Серпень","september":"Вересень","october":"Жовтень","november":"Листопад","december":"Грудень"},"updateProfile":"Оновити профіль","profileUpdated":"Профіль оновлено","invalidData":"Недійсні дані","unauthorized":"Неавторизований доступ","emailAlreadyExists":"Електронна пошта вже існує","userSettings":"Налаштування користувача","close":"Закрити","preferredLanguage":"Бажана мова","accessDenied":"Доступ заборонено","errorFetchingUsers":"Не вдалося отримати користувачів","errorUpdatingUser":"Не вдалося оновити користувача","errorTogglingUserStatus":"Не вдалося змінити статус користувача","errorCreatingUser":"Не вдалося створити користувача","users":"Користувачі","role":"Роль","actions":"Дії","noUsers":"Немає користувачів для відображення","active":"Активний","inactive":"Неактивний","edit":"Редагувати","deactivate":"Деактивувати","activate":"Активувати","selectRole":"Виберіть роль","user":"Користувач","admin":"Адміністратор","submit":"Надіслати","welcome":"Ласкаво просимо","save":"Зберегти","noComments":"Немає коментарів","deleteConfirm":"Ви впевнені, що хочете видалити це?","errorDeletingTask":"Не вдалося видалити завдання","errorSavingTask":"Не вдалося зберегти завдання","noDate":"Дата не встановлена","errorTogglingCommentStatus":"Не вдалося змінити статус коментаря","showArchived":"Показати архівовані","showInactive":"Показати неактивні","newTask":"Нове завдання","pending.tasks":"Очікуючі завдання","light.mode":"Світлий режим","dark.mode":"Темний режим","profile":"Профіль","profile.settings":"Налаштування профілю","swedish":"Шведська","polish":"Польська","ukrainian":"Українська","english":"Англійська","propertyManagement":"Управління нерухомістю","forgotPassword":"Забули пароль","enterEmail":"Введіть електронну пошту","enterPassword":"Введіть пароль","archive":"Архівувати","unarchive":"Розархівувати","errorTogglingTaskStatus":"Не вдалося змінити статус завдання"}')}};l.Ay.use(h.r9).init({resources:re,lng:"sv",fallbackLng:"en",interpolation:{escapeValue:!1}});const se=l.Ay;var de=t(349),ne=t(923),ie=t(698),oe=t(901);const le=(0,ne.HY)({tasks:V}),ce={key:"root",storage:oe.A,whitelist:["tasks"]},me=(0,ie.rL)(ce,le),ue=(0,D.U1)({reducer:me,middleware:e=>e({serializableCheck:!1})}),ge=(0,ie.GM)(ue),pe=document.getElementById("root");(0,s.H)(pe).render((0,c.jsx)(r.StrictMode,{children:(0,c.jsx)(P.Kq,{store:ue,children:(0,c.jsx)(de.Q,{loading:null,persistor:ge,children:(0,c.jsx)(h.xC,{i18n:se,children:(0,c.jsx)(u,{children:(0,c.jsxs)(G,{children:[(0,c.jsx)(te.N9,{bodyStyle:{fontFamily:"Roboto"}}),(0,c.jsx)(ae,{})]})})})})})}))}},s={};function d(e){var a=s[e];if(void 0!==a)return a.exports;var t=s[e]={exports:{}};return r[e](t,t.exports,d),t.exports}d.m=r,e=[],d.O=(a,t,r,s)=>{if(!t){var n=1/0;for(c=0;c<e.length;c++){t=e[c][0],r=e[c][1],s=e[c][2];for(var i=!0,o=0;o<t.length;o++)(!1&s||n>=s)&&Object.keys(d.O).every((e=>d.O[e](t[o])))?t.splice(o--,1):(i=!1,s<n&&(n=s));if(i){e.splice(c--,1);var l=r();void 0!==l&&(a=l)}}return a}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[t,r,s]},d.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return d.d(a,{a}),a},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,d.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var s=Object.create(null);d.r(s);var n={};a=a||[null,t({}),t([]),t(t)];for(var i=2&r&&e;"object"==typeof i&&!~a.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((a=>n[a]=()=>e[a]));return n.default=()=>e,d.d(s,n),s},d.d=(e,a)=>{for(var t in a)d.o(a,t)&&!d.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},d.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};d.O.j=a=>0===e[a];var a=(a,t)=>{var r,s,n=t[0],i=t[1],o=t[2],l=0;if(n.some((a=>0!==e[a]))){for(r in i)d.o(i,r)&&(d.m[r]=i[r]);if(o)var c=o(d)}for(a&&a(t);l<n.length;l++)s=n[l],d.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return d.O(c)},t=self.webpackChunkfrontend=self.webpackChunkfrontend||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var n=d.O(void 0,[970,182,967,471,369,247,173,54],(()=>d(798)));n=d.O(n)})();
//# sourceMappingURL=main.3eed3bad.js.map